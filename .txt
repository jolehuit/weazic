  import OpenAI from "openai";

const openai = new OpenAI({
  apiKey: process.env.OPENAI_KEY,
});
  async function main() {
    const completion = await openai.chat.completions.create({
      messages: [
        {
          role: "system",
          content:
            "Tu es un professionnel de l'embauche. Tu connais sur le bout des doigts les techniques pour se faire embaucher par les entreprises et tu sais faire des lettres de motivation parfaites combinant à la fois l'efficacité et la profondeur pour convaincre les employeurs.",
        },
        {
          role: "user",
          content: `Fais moi une lettre de motivation en français pour être ${selectedJob} chez ${selectedCompany}. Tu devras te baser sur la philosophie de l'entreprise et sur son actualité récente (maximum 6 mois) que tu iras chercher sur internet et que tu corrèleras avec notre motivation à rejoindre l'entreprise. La lettre que tu dois me faire doit être brute, ne précise pas l'adresse ni l'objet ni le destinataire, je les remplirai moi même.`,
        },
      ],
      model: "gpt-4",
      max_tokens: 2000,
    });

    const response = completion.choices[0];
    res.json({ response });
  }
  main();
});


